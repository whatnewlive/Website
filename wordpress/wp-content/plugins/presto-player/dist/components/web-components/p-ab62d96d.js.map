{"version":3,"names":["timePassed","current","duration","showAfter","percent","lightOrDark","color","r","g","b","hsp","match","rgb","hex","slice","replace","length","Math","sqrt","timeToSeconds","time","pieces","split","seconds","parseInt","getMobileOperatingSystem","userAgent","navigator","vendor","test","platform","maxTouchPoints","isIOS","isMobile","isWebView","standalone","window","toLowerCase","safari","ios","includes","isAndroidWebView","parseColor","m","exitFullScreen","player","_b","_a","config","blockAttributes","playsInline","_c","media","webkitExitFullScreen","_d","embed","exitFullscreen","_e","provider","lastTime","currentTime","once"],"sources":["src/util.ts"],"sourcesContent":["/**\n * Find out if time is passed.\n * @returns boolean\n */\nexport function timePassed({ current, duration, showAfter = null }: { current: number; duration: number; showAfter: number }) {\n  if (showAfter === 0) {\n    return true;\n  }\n\n  if (showAfter === null || !duration) {\n    return false;\n  }\n\n  if (current === showAfter) {\n    return true;\n  }\n\n  let percent = (current / duration) * 100;\n  if (99.9 < percent) {\n    percent = 100;\n  }\n  return percent >= showAfter;\n}\n\nexport function lightOrDark(color: string) {\n  if (!color) return;\n  // Variables for red, green, blue values\n  let r, g, b, hsp;\n\n  // Check the format of the color, HEX or RGB?\n  if (color.match(/^rgb/)) {\n    // If RGB --> store the red, green, blue values in separate variables\n    const rgb = color.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/);\n\n    r = rgb[1];\n    g = rgb[2];\n    b = rgb[3];\n  } else {\n    // If hex --> Convert it to RGB: http://gist.github.com/983661\n    const hex = +('0x' + color.slice(1).replace(color.length < 5 && /./g, '$&$&'));\n\n    r = hex >> 16;\n    g = (hex >> 8) & 255;\n    b = hex & 255;\n  }\n\n  // HSP (Highly Sensitive Poo) equation from http://alienryderflex.com/hsp.html\n  hsp = Math.sqrt(0.299 * (r * r) + 0.587 * (g * g) + 0.114 * (b * b));\n\n  // Using the HSP value, determine whether the color is light or dark\n  if (hsp > 127.5) {\n    return 'light';\n  } else {\n    return 'dark';\n  }\n}\n\nexport function timeToSeconds(time) {\n  let pieces = time.split(':');\n  let seconds;\n  if (pieces.length > 1) {\n    seconds = parseInt(pieces[0]) * 60;\n  }\n  return parseInt(pieces[1]) + parseInt(seconds);\n}\n\nexport function getMobileOperatingSystem() {\n  var userAgent = navigator.userAgent || navigator.vendor;\n\n  // Windows Phone must come first because its UA also contains \"Android\"\n  if (/windows phone/i.test(userAgent)) {\n    return 'Windows Phone';\n  }\n\n  if (/android/i.test(userAgent)) {\n    return 'Android';\n  }\n\n  // iOS detection from: http://stackoverflow.com/a/9039885/177710\n  if ((navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1) || /(iPad|iPhone|iPod)/gi.test(navigator.platform)) {\n    return 'iOS';\n  }\n\n  return 'unknown';\n}\n\nexport function isIOS() {\n  return getMobileOperatingSystem() === 'iOS';\n}\n\nexport function isMobile() {\n  return getMobileOperatingSystem() !== 'unknown';\n}\n\n/**\n * Is iOS Youtube Fullscreen.\n */\nexport function isiOSYoutubeFullscreen(player) {\n  return isIOS() && player.provider === 'youtube' && !player?.config?.blockAttributes?.playsinline;\n}\n\nexport function isWebView() {\n  var standalone = window.navigator['standalone'],\n    userAgent = window.navigator.userAgent.toLowerCase(),\n    safari = /safari/.test(userAgent),\n    ios = /iphone|ipod|ipad/.test(userAgent);\n\n  if (ios) {\n    if (!standalone && safari) {\n      // Safari\n      return false;\n    } else if (!standalone && !safari) {\n      // iOS webview\n      return true;\n    }\n  } else {\n    if (userAgent.includes('wv')) {\n      // Android webview\n      return true;\n    } else {\n      // Chrome\n      return false;\n    }\n  }\n}\n\nexport function isAndroidWebView() {\n  if (getMobileOperatingSystem() === 'Android' && isWebView()) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function parseColor(color) {\n  var m = color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\n  if (m) {\n    return [m[1], m[2], m[3], '1'];\n  }\n\n  m = color.match(/^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*((0.)?\\d+)\\s*\\)$/i);\n  if (m) {\n    return [m[1], m[2], m[3], m[4]];\n  }\n}\n\nexport function exitFullScreen(player: any) {\n  if (!isMobile()) return;\n  if (!player?.config?.blockAttributes?.playsInline) {\n    // html5\n    typeof player?.media?.webkitExitFullScreen === 'function' && player?.media.webkitExitFullScreen();\n\n    // vimeo\n    typeof player?.embed?.exitFullscreen === 'function' && player?.embed?.exitFullscreen();\n\n    // youtube hack\n    if (player.provider === 'youtube') {\n      const lastTime = player.currentTime;\n      player.currentTime = player.duration;\n      player.once('playing', () => {\n        player.currentTime = lastTime;\n      });\n    }\n  }\n}\n"],"mappings":"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"}